
---
title: "Unlocking Insights: Bellabeat Casestudy with R"
author: "Ayodele Olaide"
date: " "
output: 
  html_document:
    theme: cerulean
    toc: true
    toc_float: true
     
---



![](https://thumbs.dreamstime.com/b/vital-senior-woman-walking-nature-trains-endurance-fitness-vital-senior-woman-walking-nature-159818246.jpg){width=1000px height=400px}



<br><br>Welcome to my completed case study on a Wellness Technology Company: Bellabeat. 
This Analysis follows the six steps of data analysis; Ask, Prepare, Process, Analyze, Share and Act.


### Background

Founded in 2013, Bellabeat is a wellness technology company that manufactures health-focused smart products for women.


Collecting data on activity, sleep, stress and reproductive health has allowed Bellabeat to empower women with knowledge about their lifestyle, health and habits. Bellabeat has grown rapidly over the years and quickly positioned itself among the top tech-driven wellness companies for women.

Bellabeat's products include the Bellabeat app, Leaf, Time, Spring and Bellabeat membership. This analysis focuses on analyzing the Fitbit Fitness Tracker Data to unlock insights and growth opportunities for the Bellabeat app which provides users with health data related to their activity, sleep, stress, menstrual cycle and mindfulness habits.  


### Ask Phase

#### Business task
Analyze smart device usage data in order to gain insights into how consumers use non-Bellabeat smart
devices and use such insights to unlock growth opportunities and marketing strategies for Bellabeat.

#### Business objectives
Identify trends in smart device usage data
Relate trends relates to Bellabeat app users
Influence Bellabeat marketing strategies with the trends

#### Identifying the key stakeholders

- Urška Sršen: Bellabeat’s cofounder and Chief Creative Officer
- Sando Mur: Mathematician and Bellabeat’s cofounder; key member of the Bellabeat executive team
- Bellabeat marketing analytics team


### Prepare phase


#### Data description

The dataset used is the Fitbit Fitness Tracker Data, generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring.

#### Data Storage, Licensing and Privacy

Stored on Kaggle and owned by Mobius, the dataset was dedicated to the public domain using CCO. This removes any legal doubt about whether researchers can use the data in their projects,  implying that the author has given other people the right to copy, modify, share and use the dataset without asking for permission.

#### Data Verification and organization

Available for use are 18 CSV files. Each file is said to contain the documentation of different types of quantitative health data collected from the users. Briefly viewing the data in Excel, I verified that the data is stored in a long format and contains the aforementioned.

#### Data Credibility

The data can be said to be incomplete and have sample selection bias, as it was obtained from only 30 users, which might not be a true representation of the population. Although provided by a trusted 3rd party; Amazon Mechanical Turk , and also comprehensive, the data is not current. It was gathered in 2016, and has not been updated since then.

#### Data Selection

After data exploration,the following datasets were selected for analysis, as they will help in answering the business tasks:

- dailyCalories_merged
- dailyIntensities_merged
- dailySteps_merged
- sleepDay_merged
- weightLogInfo_merged



### Process Phase

Tool used: R 

I have chosen R because of its ability to accommodate large data-sets, and also because it can be use for data cleaning and manipulation, analysis and visualization. Its a all-in-one tool.  


#### Loading Libraries

```{r, echo=TRUE,results='hide'}
library(tidyverse)
library(skimr)
library(janitor)
library(ggrepel)
library(here)
library(cowplot)
```


#### Importing Datasets

```{r}
Activity <- read.csv("./Fitabase Data 4.12.16-5.12.16/dailyActivity_merged.csv")
Calories <- read.csv("./Fitabase Data 4.12.16-5.12.16/dailyCalories_merged.csv")
Steps <- read.csv("./Fitabase Data 4.12.16-5.12.16/dailySteps_merged.csv")
Sleep <- read.csv("./Fitabase Data 4.12.16-5.12.16/sleepDay_merged.csv")
Weight <- read.csv("./Fitabase Data 4.12.16-5.12.16/weightLogInfo_merged.csv")
```

#### Previewing Datasets

```{r}
# Activity
head(Activity)
glimpse(Activity)

# Calories
head(Calories)
glimpse(Calories)

# Steps
head(Steps)
glimpse(Steps)

# Sleep
head(Sleep)
glimpse(Sleep)

# Weight
head(Weight)
glimpse(Weight)

```


#### Data Cleaning 

##### Checking for duplicates


```{r}
sum(duplicated(Activity))
sum(duplicated(Calories))
sum(duplicated(Steps))
sum(duplicated(Sleep))
sum(duplicated(Weight))
```

Removing the Duplicates in **Sleep** Dataset

```{r}
SleepCleaned <- Sleep %>% 
  distinct()
```


Checking to see if the duplicates have been removed

```{r}
sum(duplicated(SleepCleaned))
```

##### Checking for Nulls

```{r,results = 'hold'}
sum(is.na(Activity))
sum(is.na(Calories))
sum(is.na(Steps))
sum(is.na(SleepCleaned))
sum(is.na(Weight))
```

A closer look at the Weight dataset, 65 null values cannot be ignored!

```{r}
na_rows <- Weight[!complete.cases(Weight), ]

tibble(na_rows)

```


Most participants left the fat column empty, hence removing the column will have no statistical significance.

```{r}
WeightCleaned <- subset(Weight, select = -Fat)

tibble(WeightCleaned)

```


##### Checking each dataset for unique users

From the data description, we see that thirty fitbit users participated in the survey. Its is however necessary  to confirm this across all datasets before analysis begin.

```{r, results='hold'}
length(unique(Activity$Id))
length(unique(Calories$Id))
length(unique(Steps$Id))
length(unique(SleepCleaned$Id))
length(unique(WeightCleaned$Id))
```

From the results above, we can confirm that are 33 unique participants in Activity,Calories,Intensities and Steps datasets, 24 in Sleep and only 8 participants in weight dataset.A survey from only 8 participants can not be relied on, and hence conclusions and recommendations cannot be derived from it. To this effect, I will be dropping the Weight dataset. 

##### Changing column names to lower case

```{r}
colnames(Activity) <- tolower(colnames(Activity))
colnames(Calories) <- tolower(colnames(Calories))
colnames(Steps) <- tolower(colnames(Steps))
colnames(SleepCleaned) <- tolower(colnames(SleepCleaned))

```


##### Changing date formats to yyyy/mm/dd

There are different types of date formats,but R uses a standardized internal representation for dates which is yyyy/mm/dd.This is because Date objects are meant for calculations and date-related operations. 
In addition, SleedDay column in the Sleep dataset has in it time, alongside days. This is not relevant and should be removed.

```{r}
#Activity
Activity <- Activity %>% 
  rename(date = activitydate) %>% 
   mutate(date = as.Date(date,format = "%m/%d/%Y"))

#Calories
Calories <- Calories %>% 
  rename(date = activityday) %>% 
  mutate(date = as.Date(date,format = "%m/%d/%Y"))

#Steps
Steps <- Steps %>% 
  rename(date = activityday) %>% 
  mutate(date = as.Date(date,format = "%m/%d/%Y"))

#SleepCleaned
SleepCleaned <- SleepCleaned %>% 
rename(date = sleepday) %>%
  mutate(date = substr(date, 1,10)) %>% 
  mutate(date = as.Date(date,format = "%m/%d/%Y"))

```


Verifying Date formatting

```{r}
tibble(Activity)
tibble(Calories)
tibble(Steps)
tibble(SleepCleaned)
```

### Analyze Phase and Share Phase

#### Data Summary

```{r}
#Activity

   #summary of steps, distance and calories
Activity %>% 
  select(totalsteps, totaldistance, veryactivedistance, moderatelyactivedistance, lightactivedistance, calories) %>%
  summary()

  #summary of time
Activity %>% 
  select(veryactiveminutes,fairlyactiveminutes,lightlyactiveminutes,sedentaryminutes) %>% 
  summary()

#SleepCleaned

SleepCleaned %>% 
  select(totalsleeprecords,totalminutesasleep,totaltimeinbed) %>% 
  summary()

```


Deductions from the summary

- The users took 7638 steps averagely per day
- There is a large difference between average total distance and very active distance.
- On average, users were very active only for 21.16 minutes.On the contrast, average sedentary time is 991.2 minutes.
-Average total time in bed is a little greater than average total minutes asleep.
- On average, total sleep records was only 1.12.


#### Classification of users based on their activity.

Since the users were not previously classified on any basis, we can classify them on the basis of their activity; steps taken per day. This classification will give an idea of the type of users in the dataset.

The pedometer [indicies](https://www.10000steps.org.au/articles/healthy-lifestyles/counting-steps/#:~:text=Sedentary%20is%20less%20than%205%2C000,than%2010%2C000%20steps%20per%20day) listed below have been developed to provide a guideline on steps and activity levels.

- Sedentary: less than 5,000 steps per day 
- Low active: 5,000 to 7,499 steps per day
- Somewhat active: 7,500 to 9,999 steps per day
- Active: more than 10,000 steps per day
- Highly active: more than 12,500 


```{r}
#calculating average daily steps for each user

Average_daily_steps <-Steps %>% 
  group_by(id) %>% 
  summarise(averagedailysteps = mean(steptotal)) 

head(Average_daily_steps)
```

```{r}
#Classification of users based on activity

User_type <- Average_daily_steps %>% 
  mutate(usertype =case_when(
    averagedailysteps < 5000 ~ "Sedentary",
    averagedailysteps >= 5000 & averagedailysteps < 7499 ~ "Low active",
    averagedailysteps >= 7500 & averagedailysteps < 9999 ~ "Somewhat active",
    averagedailysteps > 10000 ~ "Active",
    averagedailysteps >12500 ~ "Highly active"))

tibble(User_type)

```


```{r}
#Summary of usertype

User_type_Sum <- User_type %>% 
  group_by(usertype) %>% 
  summarise(total = n()) %>% 
  mutate(percentage = total/sum(total)) %>% 
  mutate(percentage = round(percentage, digits = 2)) %>% 
  mutate(labels = scales::percent(percentage)) 

User_type_Sum$usertype <- factor(User_type_Sum$usertype, levels =c ("Active", "Sedentary","Somewhat active","Low active"))

head(User_type_Sum)

```


From the summary above, we can see that only 21.21% of the users are active, 27.27% are low active/somewhat active, and 24.24 are sedentary.

Visualizing the user_type_sum data with a pie chart we have:


```{r}
User_type_Sum %>%
  ggplot(aes(x = "", y = percentage, fill =usertype)) +
  geom_bar(stat = "identity", width = 1) +
  geom_text(aes(label = labels), position = position_stack(vjust = 0.5), size = 4, color = "black") +
  coord_polar("y", start = 0) +
  ggtitle("User Type Distribution") +
  theme_bw() +
  theme(plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
        axis.title = element_blank(),
        axis.text = element_blank(),
        axis.ticks = element_blank(),
        panel.grid = element_blank(),
        panel.border = element_blank(),
        legend.title = element_text(size = 12,face = "bold"),
        legend.position = "right",
        legend.text = element_text(size = 10))+
        scale_fill_manual(values =c("#3E803E","#B0E57C","#59A14F","#7BBE3E"),
                          labels = c("Active", "Sedentary","Somewhat active","Low active"))+
    guides(fill = guide_legend(reverse = TRUE))


```



#### Steps and calories burned 

```{r}
Steps_Calories <- Activity %>% 
  select(totalsteps,calories)

tibble(Steps_Calories)
```

We can see the relationship between steps and calories in the plot below:

```{r}
Plot_1 <- Steps_Calories %>% 
  ggplot(aes(x = totalsteps,y = calories,color = calories))+
  geom_jitter()+
geom_smooth(method = "loess", formula = "y ~ x",color ="blue") +
   labs(x = "Total Steps",
       y = "Calories",
    title ="Steps vs Calories Burnt")+
  theme(plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
        axis.title.x = element_text(size = 12),
        axis.title.y = element_text(size = 12),
        legend.position = "none")+
  scale_color_gradient(low = "red",high = "green")
Plot_1


```       
  


#### Sleep time and step

```{r}
#merging sleepcelaned and Steps datasets

Sleep_steps <- merge(SleepCleaned, Steps, by = c("id","date"))

Sleep_steps <- Sleep_steps %>% 
  select(totalminutesasleep,steptotal)

tibble(Sleep_steps)
        
```


```{r}
Plot_2 <-Sleep_steps %>% 
ggplot(aes(x = steptotal,y = totalminutesasleep,color =totalminutesasleep))+
  geom_jitter()+
  geom_smooth(method = "loess", formula = "y ~ x",color ="purple") +
  labs(x = "Total steps",
       y = "Total minutes asleep",
    title ="Total Steps vs Total minutes asleep")+
  theme(plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
        axis.title.x = element_text(size = 12),
        axis.title.y = element_text(size = 12),
    legend.position = "none")+
  scale_color_gradient(low = "red",high = "green")

  
Plot_2
```



#### CorrelationS

```{r}
plot_grid(Plot_1,Plot_2, ncol = 2)
```

Deductions

- There is a positive correlation between Calories and steps,and this is not far fetched, because generally speaking, the higher number of steps you take, the more calories you burn.
- There is little to no apparent relationship or correlation between steps and minutes asleep.


#### Sedentary time and calories

```{r}
Sedmin_Cal <- Activity %>% 
  select(sedentaryminutes,calories)

tibble(Sedmin_Cal)
```

Note
```{r}
Sedmin_Cal %>% 
ggplot(aes(x = sedentaryminutes,y = calories, color = calories))+
  geom_jitter()+
  geom_smooth(method = "loess", formula = "y ~ x",color ="purple") +
  labs(x = "Sedentary minutes",
       y = "Calories",
    title ="Sedentary minutes vs Calories burnt")+
  theme(plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
        axis.title.x = element_text(size = 12),
        axis.title.y = element_text(size = 12),
    legend.position = "none")+
  scale_color_gradient(low = "blue",high = "yellow")

       
        
```





#### Time in bed vs time asleep

```{r}
sleeplatency <- SleepCleaned %>% 
  select(totaltimeinbed,totalminutesasleep)

tibble(sleeplatency)
```
note

```{r}
sleeplatency %>% 
ggplot(aes(x =totaltimeinbed ,y = totalminutesasleep,color = totalminutesasleep))+
  geom_jitter()+
  geom_smooth(method = "loess", formula = "y ~ x",color ="blue") +
  labs(x = "Total time in bed",
       y = "Total minutes asleep",
    title ="Time in bed vs Time asleep")+
  theme(plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
        axis.title.x = element_text(size = 12),
        axis.title.y = element_text(size = 12),
    legend.position = "none")+
  scale_color_gradient(low = "red",high = "green")

```

The relationship between time in bed and time asleep look linear, this means the more time the users spent in bed, the more they were able to sleep.


#### Usertype and calories


```{r}

Average_cal_burnt <- Calories %>% 
  group_by(id) %>% 
  summarise(averagecal = mean(calories))

usertype_calories <- merge(User_type,Average_cal_burnt, by = "id") 

usertype_calories <- usertype_calories %>% 
  group_by(usertype) %>% 
  summarise(averagecalburnt = mean(averagecal)) %>% 
  mutate(usertype = reorder(usertype,-averagecalburnt))
  


head(usertype_calories)
```

NOTE 
```{r}
usertype_calories %>% 
  ggplot(aes(x = usertype, y=averagecalburnt, fill = usertype))+
  geom_bar(stat = "identity")+
  labs(
    title = "User type vs Calories",
    x = "User type",
    y = "Average Calories")+
   theme(plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
        legend.title = element_text(size = 12, face = "bold"),
        legend.position = "right",
        legend.text = element_text(size = 10),
        axis.title.x = element_text(size = 12),
        axis.title.y = element_text(size = 12))+
 scale_fill_manual(values = c("green","yellow","orange","red"))

        
```

It is not surprising that the active users are burning the most calories!


#### Usertype and sleep

```{r}
Average_minutes_asleep <- SleepCleaned %>% 
  group_by(id) %>% 
  summarise(averageminutesasleep = mean(totalminutesasleep))

usertype_sleep <- merge(User_type, Average_minutes_asleep, by= "id") 
  
Usertype_Sleep <-usertype_sleep %>% 
  group_by(usertype) %>% 
  summarise(averageminutesasleep = mean(averageminutesasleep)) %>% 
  mutate(usertype = reorder(usertype,-averageminutesasleep))

  head(Usertype_Sleep)
```

NOTE
```{r}
Usertype_Sleep %>% 
  ggplot(aes(x = usertype, y=averageminutesasleep, fill = usertype))+
  geom_bar(stat = "identity")+
  labs(
    title = "User type vs Sleep",
    x = "User type",
    y = "Average Sleep")+
  theme(plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
        legend.title = element_text(size = 12, face = "bold"),
        legend.position = "right",
        legend.text = element_text(size = 10),
        axis.title.x = element_text(size = 12),
        axis.title.y = element_text(size = 12))+
   scale_fill_manual(values = c("blue","green","yellow","gold"))

  
        
```

It is worthy to note that the active users are spending less time sleeping.


#### Usage summary

Finally, let us classify our users based on how often they used their smartdevice during the survey period.


```{r}
usage_summary <- Activity %>% 
  group_by(id) %>% 
  summarise(days_used = n_distinct(date))

tibble(usage_summary)
```

From the usage_summary above, we see that the duration was 31 days.we can group the users based on how active they were during the survey duration as follows:

- Very active users:28 days and above
- Active users:21 days - 27 days
- Fairly active users:15 days - 20 days
- Occasional users:less than 15 days

```{r}
usage_summary <- usage_summary %>% 
mutate(usagegroup = case_when(
  days_used > 28 ~ "Very Active", 
  days_used >= 21 & days_used < 27 ~ "Active",
  days_used >= 10 & days_used < 20 ~ "Fairly Active",
  TRUE  ~ "Occassional Users"))

usage_summary <- usage_summary %>% 
  group_by(usagegroup) %>% 
  summarise(total = n()) %>% 
  mutate(percentage = total/sum(total)) %>% 
  mutate(percentage = round(percentage, digits = 2)) %>% 
  mutate(labels = scales::percent(percentage))


  
usage_summary$usagegroup <- factor(usage_summary$usagegroup,levels = c("Active", "Fairly Active","Occassional Users","Very Active"))

  
head(usage_summary)

```

note 
```{r}
usage_summary %>% 
 ggplot(aes(x = "", y = percentage, fill = usagegroup)) +
  geom_bar(stat = "identity", width = 1) +
  geom_text(aes(label = labels), position = position_stack(vjust = 0.5), size = 4, color = "black") +
  coord_polar("y", start = 0) +
  ggtitle("Usage Summary") +
  theme_bw() +
  theme(
    plot.title = element_text(hjust = 0.5, size = 14, face = "bold"),
    axis.title = element_blank(),
    axis.text = element_blank(),
    axis.ticks = element_blank(),
    panel.grid = element_blank(),
    panel.border = element_blank(),
    legend.title = element_text(size = 12, face = "bold"),
    legend.position = "right",
    legend.text = element_text(size = 10))+
    scale_fill_manual(values = c("#0066CC","#00BFFF","#AEEEEE","#00008B"),
                      labels = c("Active", "Fairly Active","Occassional Users","Very Active"))+
  guides(fill = guide_legend(reverse = TRUE))



```

A whooping 79% of the users were very active, that is they were active for 28 days and above during the 31days survey period. This is commendable, however Bellabeat can get her users to be even more active. How to actualize this and many more are listed in the recommendation.



### Recommendations for Bellabeat app (Act Phase)

- Encourage Bellabeat app users to set activity goals.However, with or without these goals, there should be standards set for activity.From the guideline on steps and activity, we know how many steps are considered active and otherwise.
- Implement reminders to encourage users complete their goals.This reminder should remind them of how much they have left to complete their goals,or activity standards.
- Push notifications on the importance of taking active walks such as:
  - Maintaining a healthy weight and losing body fat.
  - Prevention or management of various conditions, including heart disease, stroke, high blood pressure, cancer and diabetes.
  - Strong bones and muscles.
  -Improved muscle endurance.
- Create a daily calorie burn goal for users seeking to lose weight and also provide healthy food recommendations.
- Push notification that encourages users to log in sleep time(from the analysis total sleep records was only 1.12 times, for just 24 users) and recommendations of bed time activities that reduces sleep latency and improves quality of sleep.
- Employ the use of streaks and rewards to encourage people to use their Bellabeat app everyday!















